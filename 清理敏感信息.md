# 🔒 清理 GitHub 仓库中的敏感信息

## ⚠️ 发现的隐私问题

1. **Git 提交历史中包含邮箱地址**：`16662187689@qq.com`
2. **GitHub 用户名**：`1662187689`（已在多个文件中出现，这个可以保留）
3. **Gist ID**：`ae97ddcecaaf2f3dea622ef7b2520c67`（这个是公开的，可以保留）

## 🛡️ 已采取的措施

1. ✅ 已更新 `.gitignore`，防止敏感文件被提交
2. ✅ Token 已从代码中移除，只保存在环境变量中
3. ✅ 敏感文件已添加到 `.gitignore`

## 🔧 清理 Git 历史中的邮箱（可选）

如果你想要从 Git 历史中移除邮箱地址，可以使用以下方法：

### 方法 1：修改未来的提交（推荐）

```bash
# 修改 Git 配置，使用新的邮箱
git config --global user.email "your-new-email@example.com"
git config --global user.name "Your Name"

# 之后的所有提交将使用新邮箱
```

### 方法 2：重写历史（⚠️ 危险操作）

**注意**：这会改变所有 commit 的哈希值，需要强制推送，可能影响其他协作者。

```bash
# 使用 git filter-branch 重写历史
git filter-branch --env-filter '
OLD_EMAIL="16662187689@qq.com"
CORRECT_NAME="Your Name"
CORRECT_EMAIL="your-new-email@example.com"

if [ "$GIT_COMMITTER_EMAIL" = "$OLD_EMAIL" ]
then
    export GIT_COMMITTER_NAME="$CORRECT_NAME"
    export GIT_COMMITTER_EMAIL="$CORRECT_EMAIL"
fi
if [ "$GIT_AUTHOR_EMAIL" = "$OLD_EMAIL" ]
then
    export GIT_AUTHOR_NAME="$CORRECT_NAME"
    export GIT_AUTHOR_EMAIL="$CORRECT_EMAIL"
fi
' --tag-name-filter cat -- --branches --tags

# 强制推送（⚠️ 危险）
git push --force --all
git push --force --tags
```

### 方法 3：使用 GitHub 的邮箱隐私功能（最简单）

1. 访问：https://github.com/settings/emails
2. 勾选 "Keep my email addresses private"
3. 使用 GitHub 提供的 `noreply` 邮箱

## 📋 当前已保护的信息

- ✅ Token：已从代码中移除，只保存在环境变量
- ✅ 密码：未发现密码泄露
- ✅ API Key：未发现 API Key 泄露
- ⚠️ 邮箱：在 Git 历史中（可通过上述方法处理）

## 🔍 检查是否还有其他敏感信息

```bash
# 检查代码中是否包含敏感信息
git grep -i "password\|secret\|token\|key" -- "*.js" "*.json" "*.md"

# 检查 Git 历史
git log --all --full-history -p | grep -i "password\|secret\|token"
```

## ✅ 建议

1. **立即操作**：
   - 在 GitHub 设置中启用邮箱隐私保护
   - 修改 Git 配置使用新邮箱（未来提交）

2. **可选操作**：
   - 如果仓库是公开的，考虑重写历史
   - 如果仓库是私有的，邮箱泄露影响较小

3. **预防措施**：
   - 使用 `.gitignore` 排除敏感文件
   - 使用环境变量存储敏感信息
   - 定期检查代码中是否有敏感信息

